# LeetCode 73.矩阵置零

给定一个 m x n 的矩阵，如果一个元素为 0，则将其所在行和列的所有元素都设为 0。请使用原地算法。

示例 1:

```
输入: 
[
  [1,1,1],
  [1,0,1],
  [1,1,1]
]
输出: 
[
  [1,0,1],
  [0,0,0],
  [1,0,1]
]
```




示例 2:

```
输入: 
[
  [0,1,2,0],
  [3,4,5,2],
  [1,3,1,5]
]
输出: 
[
  [0,0,0,0],
  [0,4,5,0],
  [0,3,1,0]
]
```



进阶:

一个直接的解决方案是使用  O(mn) 的额外空间，但这并不是一个好的解决方案。
一个简单的改进方案是使用 O(m + n) 的额外空间，但这仍然不是最好的解决方案。
你能想出一个常数空间的解决方案吗？



## 解题分析

这道题的题意很简单，如果不做限制的话非常容易实现，只需要将原数组复制一份出来，然后根据复制出来的数组中0的位置来变换原数组中元素的值，这种方法空间复杂度为O(mn)。这里我们直接来介绍一种空间复杂度为O(1)的方法

首先，我们一定不能碰到零的时候就对行和列置零，因为这会影响到我们后续的修改过程，因此我们必须想办法找地方把这个值为零的位置的行和列信息存储起来，此时用于存储行列信息的最佳位置就是第一行和第一列，也就是说当我们遇到值为零的元素的时候，我们九八该行和该列的第一个元素置为零，通过第一行和第一列存储需要变换的行和列信息，在我们遍历完之后，可以通过第一行和第一列的元素来对矩阵置零，但是这样有一个需要处理的问题，我们来看图

![image-20210321090751442](C:\Users\慈凯瑜\AppData\Roaming\Typora\typora-user-images\image-20210321090751442.png)

根据我们刚刚的思路，我们把需要置零的行列信息都存储到对应的位置了，但是我们现在已经第一行和第一列都包含零，我们不确定第一行和第一列是否需要全置为零，也就是说，刚刚的过程破坏了第一行和第一列的信息，因此我们在这之前，我们需要存储第一行和第一列的信息，我们设置两个标志位flagCol和flagRow，初始值为1，我们先遍历第一行和第一列，判断他们最后是否需要变为0，然后按我们刚刚的思路来对其他行和列置零，最后在根据两个标志位设置第一行和第一列的值，来看代码

```java
class Solution {
    public void setZeroes(int[][] matrix) {
        
        int flagCol = 1;
        int flagRow = 1;
        
        int row = matrix.length;
        int col = matrix[0].length;
		
        //设置第一行的标志位，遇零则置零
        for(int i = 0 ; i < col ; i ++){
            if(matrix[0][i]==0){
                flagRow = 0;
                break;
            }  
        }
        
        //设置第一列的标志位，遇零则置零
        for(int i = 0 ; i < row ; i ++){
            if(matrix[i][0]==0){
                flagCol = 0;
                break;
            }  
        }
		
        //对非首行和非首列的元素元素进行遍历
        for(int i = 1 ; i < row ; i ++){
            for(int j =1 ; j < col ; j ++){
                //遇到零，则将行头和表头置零
                if(matrix[i][j]==0){
                    matrix[i][0] = 0;
                    matrix[0][j] = 0;
                }
            }
        }
		
        //根据列头对该列置零
        for(int i =1 ; i < col ; i ++){
            if(matrix[0][i]==0){
                for(int j = 1 ; j<row ; j ++){
                    matrix[j][i] = 0;
                }
            }
        }
		
        //根据行头对该行置零
        for(int i = 1 ; i < row ; i++){
            if(matrix[i][0]==0){
                for(int j = 1 ; j < col ; j++){
                    matrix[i][j] = 0;
                }
            }
        }

        //如果行标志位为零，则将所有行头置零
        if(flagRow==0){
            for(int i = 0 ;i <col;  i++){
                matrix[0][i] = 0;
            }
        }

		//如果列标志位为零，则将所有列头置零
        if(flagCol==0){
            for(int i = 0 ; i  < row ; i ++){
                matrix[i][0] = 0;
            }
        }

    }
}
```



